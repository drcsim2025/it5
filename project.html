<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IT 용어 사전</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* --- 다크모드 스타일 --- */
      body.dark-mode {
        background-color: #121212;
        color: #eee;
      }

      body.dark-mode header {
        background-color: #333;
      }

      body.dark-mode nav a {
        color: #fff;
      }

      body.dark-mode .term-card,
      body.dark-mode #quiz {
        background-color: #1e1e1e;
        color: #eee;
        box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
      }

      body.dark-mode #options button {
        background-color: #222;
        color: #eee;
        border: 1px solid #444;
      }

      .toggle-dark {
        background-color: #fff;
        color: #333;
        border: none;
        padding: 8px 16px;
        border-radius: 5px;
        margin-top: 10px;
        cursor: pointer;
        font-weight: bold;
      }

      body.dark-mode .toggle-dark {
        background-color: #444;
        color: #eee;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="container">
        <h1>IT 용어 사전</h1>
        <nav>
          <a href="#terms">용어 목록</a>
          <a href="#quiz">일일 퀴즈 풀기</a>
        </nav>
        <form id="searchForm" onsubmit="return openTermPage(event)">
          <input
            type="text"
            placeholder="용어를 검색하세요..."
            id="searchBox"
          />
        </form>

        <br />
        <button class="toggle-dark" onclick="toggleDarkMode()">
          🌙 다크 모드
        </button>
      </div>
    </header>

    <main class="container">
      <!-- ✅ 용어 목록 -->
      <section id="terms">
        <h2>📚 용어 목록</h2>
        <div id="termList">
          <!-- 용어 카드 예시 -->
          <div class="term-card">
            <h2>API</h2>
            <p>
              Application Programming Interface. 소프트웨어 간 상호작용
              인터페이스입니다.
            </p>
          </div>
          <div class="term-card">
            <h2>HTML</h2>
            <p>웹 페이지의 구조를 정의하는 마크업 언어입니다.</p>
          </div>
          <div class="term-card">
            <h2>CSS</h2>
            <p>웹 페이지의 스타일을 지정하는 언어입니다.</p>
          </div>
          <div class="term-card">
            <h2>JavaScript</h2>
            <p>웹에 동적인 기능을 추가하는 언어입니다.</p>
          </div>
          <div class="term-card">
            <h2>Git</h2>
            <p>버전 관리를 위한 분산 시스템입니다.</p>
          </div>
          <div class="term-card">
            <h2>HTTP</h2>
            <p>웹 통신을 위한 프로토콜입니다.</p>
          </div>
        </div>
      </section>

      <!-- ✅ 연속 퀴즈 -->
      <section id="quiz">
        <h2>📘 일일 퀴즈 풀기</h2>
        <div class="quiz-box">
          <p id="question">퀴즈를 불러오는 중...</p>
          <div id="options"></div>
          <p id="result"></p>
          <button id="nextBtn" style="display: none" onclick="loadNextQuiz()">
            다음 문제 ▶
          </button>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 나의 IT 용어 사전</p>
    </footer>

    <!-- ✅ JS 스크립트 -->
    <script>
      function openTermPage(event) {
        event.preventDefault(); // 기본 submit 방지
        const query = document
          .getElementById("searchBox")
          .value.trim()
          .toLowerCase();

        if (!query) return false;

        // 현재 있는 카드들 중에서 해당 용어를 찾아서 내용 복사
        const cards = document.querySelectorAll(".term-card");
        let found = null;

        cards.forEach((card) => {
          const title = card.querySelector("h2").textContent.toLowerCase();
          if (title === query) {
            found = card.innerHTML;
          }
        });

        const win = window.open("", "_blank", "width=600,height=400");
        if (found) {
          win.document.write(`
      <!DOCTYPE html>
      <html lang="ko">
      <head>
        <meta charset="UTF-8" />
        <title>용어: ${query}</title>
        <style>
          body { font-family: 'Segoe UI', sans-serif; padding: 30px; background: #f9f9f9; }
          .term-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
          }
          h2 { color: #1e88e5; }
        </style>
      </head>
      <body>
        <div class="term-card">
          ${found}
        </div>
      </body>
      </html>
    `);
        } else {
          win.document.write(`
      <p style="padding:30px; font-family:sans-serif">"${query}" 용어를 찾을 수 없습니다.</p>
    `);
        }

        return false;
      }

      const quizData = [
        {
          question: "API는 무엇을 뜻하나요?",
          options: [
            "웹 디자인",
            "상호작용 인터페이스",
            "하드웨어",
            "보안 모듈",
          ],
          answer: "상호작용 인터페이스",
        },
        {
          question: "HTML은 무엇을 위한 언어인가요?",
          options: ["디자인", "구조 정의", "암호화", "데이터 저장"],
          answer: "구조 정의",
        },
        {
          question: "CSS의 주요 기능은?",
          options: [
            "웹 스타일 지정",
            "서버 보안",
            "데이터베이스 연결",
            "하드웨어 제어",
          ],
          answer: "웹 스타일 지정",
        },
        {
          question: "JavaScript는 어떤 역할을 하나요?",
          options: [
            "정적 페이지 표시",
            "동적 기능 추가",
            "서버 구축",
            "문서 인쇄",
          ],
          answer: "동적 기능 추가",
        },
        {
          question: "Git은 무엇을 위한 도구인가요?",
          options: ["웹 호스팅", "버전 관리", "파일 압축", "보안 테스트"],
          answer: "버전 관리",
        },
      ];

      let currentQuizIndex = 0;

      function loadNextQuiz() {
        const quiz = quizData[currentQuizIndex];
        document.getElementById("question").textContent = quiz.question;
        const optionsDiv = document.getElementById("options");
        const result = document.getElementById("result");
        const nextBtn = document.getElementById("nextBtn");

        optionsDiv.innerHTML = "";
        result.textContent = "";
        nextBtn.style.display = "none";

        quiz.options.forEach((option) => {
          const btn = document.createElement("button");
          btn.textContent = option;
          btn.onclick = () => {
            if (option === quiz.answer) {
              result.textContent = "✅ 정답입니다!";
              nextBtn.style.display = "inline-block";
              currentQuizIndex = (currentQuizIndex + 1) % quizData.length;
            } else {
              result.textContent = "❌ 오답입니다. 다시 시도하세요.";
            }
          };
          optionsDiv.appendChild(btn);
        });
      }

      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
      }

      // 검색 기능
      document.getElementById("searchBox").addEventListener("input", () => {
        const query = document.getElementById("searchBox").value.toLowerCase();
        const cards = document.querySelectorAll(".term-card");
        cards.forEach((card) => {
          const text = card.textContent.toLowerCase();
          card.style.display = text.includes(query) ? "block" : "none";
        });
      });

      window.onload = loadNextQuiz;
    </script>
  </body>
</html>
