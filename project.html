<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IT Ïö©Ïñ¥ ÏÇ¨Ï†Ñ & ÌÄ¥Ï¶à</title>
    <style>
      /* reset */
      * {
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background: #f0f2f5;
        color: #222;
        transition: background-color 0.3s, color 0.3s;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* Îã§ÌÅ¨ Î™®Îìú */
      body.dark-mode {
        background: #121212;
        color: #ddd;
      }
      body.dark-mode .term-card {
        background: #1e1e1e;
        border-color: #444;
      }
      body.dark-mode #menuBox {
        background: #222;
        border-color: #555;
      }
      body.dark-mode button,
      body.dark-mode input {
        background: #333;
        color: #ddd;
        border-color: #555;
      }
      body.dark-mode button:hover {
        background: #444;
      }

      /* ÏÉÅÎã® Î©îÎâ¥ Î≤ÑÌäº */
      #menuBtn {
        position: fixed;
        top: 10px;
        left: 10px;
        z-index: 1001;
        background: #4a90e2;
        border: none;
        color: white;
        font-size: 18px;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
      }
      #menuBtn:hover {
        background: #357abd;
      }

      /* Ï¢åÏ∏° Î©îÎâ¥Î∞ïÏä§ */
      #menuBox {
        position: fixed;
        top: 55px;
        left: -240px;
        width: 200px;
        height: 300px;
        background: white;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        border-right: 2px solid #ccc;
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 3rem;
        transition: left 0.1s ease;
        z-index: 1000;
      }
      #menuBox.open {
        left: 0;
      }
      #menuBox button {
        background: #4a90e2;
        border: none;
        color: white;
        padding: 10px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s;
      }
      #menuBox button:hover {
        background: #357abd;
      }

      /* Í≤ÄÏÉâ ÏòÅÏó≠ */
      #searchContainer {
        margin: 70px 0 20px 0;
        width: 680px;
        position: relative;
        display: flex;
        gap: 4px;
      }
      #searchBox {
        flex-grow: 1;
        padding: 10px 12px;
        font-size: 16px;
        border: 2px solid #4a90e2;
        border-radius: 4px;
        outline-offset: 2px;
        transition: border-color 0.3s;
      }
      #searchBox:focus {
        border-color: #357abd;
      }
      #searchBtn {
        background: #4a90e2;
        border: none;
        color: white;
        font-size: 16px;
        padding: 0 16px;
        border-radius: 4px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s;
      }
      #searchBtn:hover {
        background: #357abd;
      }

      /* ÏûêÎèôÏôÑÏÑ± Î¶¨Ïä§Ìä∏ */
      #autocompleteList {
        position: absolute;
        top: 44px;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #4a90e2;
        border-top: none;
        max-height: 180px;
        overflow-y: auto;
        list-style: none;
        margin: 0;
        padding: 0;
        font-size: 15px;
        z-index: 500;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border-radius: 0 0 6px 6px;
      }
      #autocompleteList li {
        padding: 8px 12px;
        cursor: pointer;
        user-select: none;
      }
      #autocompleteList li:hover,
      #autocompleteList li.active {
        background: #4a90e2;
        color: white;
      }

      /* Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ */
      #contentArea {
        max-width: 900px;
        width: 100%;
        padding: 1rem;
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: center;
        min-height: 60vh;
      }

      /* Ïö©Ïñ¥ Ïπ¥Îìú */
      .term-card {
        background: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 12px 16px;
        width: 220px;
        box-shadow: 0 2px 6px rgb(0 0 0 / 0.1);
        cursor: pointer;
        transition: box-shadow 0.3s, border-color 0.3s;
        display: flex;
        flex-direction: column;
        gap: 6px;
        user-select: none;
        outline-offset: 3px;
      }
      .term-card:hover,
      .term-card:focus {
        box-shadow: 0 4px 12px rgb(74 144 226 / 0.6);
        border-color: #4a90e2;
        outline: none;
      }
      .term-card h3 {
        margin: 0;
        font-size: 1.2rem;
        color: #357abd;
      }
      .term-card p {
        margin: 0;
        font-size: 0.95rem;
        color: #555;
      }
      body.dark-mode .term-card {
        background: #1e1e1e;
        border-color: #444;
        color: #ddd;
      }
      body.dark-mode .term-card h3 {
        color: #7abaff;
      }
      body.dark-mode .term-card p {
        color: #aaa;
      }

      /* ÌÄ¥Ï¶à Î∞ïÏä§ */
      #quizBox {
        width: 100%;
        max-width: 650px;
        background: white;
        border-radius: 10px;
        padding: 20px 25px;
        box-shadow: 0 6px 12px rgb(0 0 0 / 0.15);
        user-select: none;
        color: #222;
      }
      body.dark-mode #quizBox {
        background: #222;
        color: #ddd;
        box-shadow: 0 6px 12px rgba(255 255 255 / 0.1);
      }
      #quizBox p#question {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 20px;
      }
      #options {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin-bottom: 20px;
      }
      #options button {
        flex: 1 1 45%;
        padding: 12px;
        font-size: 1rem;
        border-radius: 6px;
        border: 2px solid #4a90e2;
        background: white;
        color: #357abd;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
        user-select: none;
      }
      #options button:hover:not(:disabled) {
        background: #357abd;
        color: white;
      }
      #options button:disabled {
        cursor: default;
        opacity: 0.6;
      }
      #result {
        min-height: 24px;
        font-weight: 600;
        margin-bottom: 10px;
        font-size: 1.1rem;
      }
      #nextBtn,
      #retryBtn {
        background: #4a90e2;
        border: none;
        color: white;
        padding: 10px 20px;
        font-size: 1.1rem;
        border-radius: 6px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s;
      }
      #nextBtn:disabled {
        background: #a3c0f0;
        cursor: default;
      }
      #nextBtn:hover:not(:disabled),
      #retryBtn:hover {
        background: #357abd;
      }
    </style>
  </head>
  <body>
    <button
      id="menuBtn"
      aria-haspopup="true"
      aria-expanded="false"
      aria-controls="menuBox"
      title="Î©îÎâ¥ Ïó¥Í∏∞/Îã´Í∏∞"
    >
      ‚ò∞ Î©îÎâ¥
    </button>
    <nav id="menuBox" role="menu" aria-hidden="true" tabindex="-1">
      <button id="showTermsBtn" role="menuitem">Ïö©Ïñ¥ ÏÇ¨Ï†Ñ Î≥¥Í∏∞</button>
      <button id="showQuizBtn" role="menuitem">ÌÄ¥Ï¶à ÌíÄÍ∏∞</button>
      <button id="toggleDarkBtn" role="menuitem" aria-pressed="false">
        Îã§ÌÅ¨Î™®Îìú ÌÜ†Í∏Ä
      </button>
    </nav>

    <form
      id="searchForm"
      autocomplete="off"
      role="search"
      aria-label="Ïö©Ïñ¥ Í≤ÄÏÉâ"
    >
      <div id="searchContainer">
        <input
          type="text"
          id="searchBox"
          aria-autocomplete="list"
          aria-controls="autocompleteList"
          aria-expanded="false"
          aria-haspopup="listbox"
          placeholder="Í≤ÄÏÉâÏñ¥ ÏûÖÎ†• (Ïòà: HTML, API, Docker)"
        />
        <button id="searchBtn" aria-label="Í≤ÄÏÉâ">üîç</button>
        <ul id="autocompleteList" role="listbox" hidden></ul>
      </div>
    </form>

    <main id="contentArea" tabindex="0" aria-live="polite">
      <!-- Ïö©Ïñ¥ Ïπ¥Îìú ÎòêÎäî ÌÄ¥Ï¶à ÎÇ¥Ïö© Ï∂úÎ†• ÏòÅÏó≠ -->
    </main>

    <script>
      // Ïö©Ïñ¥ Îç∞Ïù¥ÌÑ∞ (50Í∞ú)
      const terms = [
        {
          term: "API",
          desc: "ÏùëÏö© ÌîÑÎ°úÍ∑∏Îû® Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î°ú, ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ Í∞Ñ ÏÉÅÌò∏ÏûëÏö© Í∑úÏπô.",
        },
        { term: "HTML", desc: "Ïõπ ÌéòÏù¥ÏßÄÏùò Í∏∞Î≥∏ Íµ¨Ï°∞Î•º ÎßåÎìúÎäî ÎßàÌÅ¨ÏóÖ Ïñ∏Ïñ¥." },
        { term: "CSS", desc: "Ïõπ ÌéòÏù¥ÏßÄÏùò Ïä§ÌÉÄÏùºÍ≥º Î†àÏù¥ÏïÑÏõÉÏùÑ ÏßÄÏ†ïÌïòÎäî Ïñ∏Ïñ¥." },
        {
          term: "JavaScript",
          desc: "Ïõπ ÌéòÏù¥ÏßÄÏóê ÎèôÏ†ÅÏù∏ Í∏∞Îä•ÏùÑ Ï∂îÍ∞ÄÌïòÎäî ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç Ïñ∏Ïñ¥.",
        },
        { term: "HTTP", desc: "ÏõπÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Ï£ºÍ≥†Î∞õÎäî ÌîÑÎ°úÌÜ†ÏΩú." },
        { term: "HTTPS", desc: "HTTPÏóê Î≥¥Ïïà Í∏∞Îä•ÏùÑ Ï∂îÍ∞ÄÌïú ÌîÑÎ°úÌÜ†ÏΩú." },
        { term: "DOM", desc: "Ïõπ Î¨∏ÏÑúÏùò Í∞ùÏ≤¥ Î™®Îç∏." },
        { term: "AJAX", desc: "ÎπÑÎèôÍ∏∞ Ïõπ ÌÜµÏã† Í∏∞Ïà†." },
        { term: "JSON", desc: "Îç∞Ïù¥ÌÑ∞ ÍµêÌôòÏóê ÏÇ¨Ïö©ÎêòÎäî Í≤ΩÎüâÏùò ÌÖçÏä§Ìä∏ ÌòïÏãù." },
        { term: "SQL", desc: "Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏßàÏùò Ïñ∏Ïñ¥." },
        { term: "Git", desc: "Î≤ÑÏ†Ñ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú." },
        { term: "Node.js", desc: "ÏÑúÎ≤Ñ ÏÇ¨Ïù¥ÎìúÏóêÏÑú JavaScript Ïã§Ìñâ ÌôòÍ≤Ω." },
        { term: "React", desc: "UI ÎùºÏù¥Î∏åÎü¨Î¶¨." },
        { term: "Vue.js", desc: "ÌîÑÎ°úÍ∑∏Î†àÏãúÎ∏å ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÌîÑÎ†àÏûÑÏõåÌÅ¨." },
        { term: "Docker", desc: "Ïª®ÌÖåÏù¥ÎÑà Í∏∞Î∞ò Í∞ÄÏÉÅÌôî ÌîåÎû´Ìèº." },
        { term: "Kubernetes", desc: "Ïª®ÌÖåÏù¥ÎÑà Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò ÎèÑÍµ¨." },
        { term: "Cloud Computing", desc: "Ïù∏ÌÑ∞ÎÑ∑ Í∏∞Î∞ò Ïª¥Ìì®ÌåÖ ÏÑúÎπÑÏä§." },
        { term: "Machine Learning", desc: "Í∏∞Í≥Ñ ÌïôÏäµ." },
        { term: "AI", desc: "Ïù∏Í≥µÏßÄÎä•." },
        { term: "Big Data", desc: "ÎåÄÍ∑úÎ™® Îç∞Ïù¥ÌÑ∞ ÏßëÌï©." },
        { term: "Blockchain", desc: "Î∂ÑÏÇ∞ ÏõêÏû• Í∏∞Ïà†." },
        { term: "Encryption", desc: "Îç∞Ïù¥ÌÑ∞ ÏïîÌò∏Ìôî." },
        { term: "Firewall", desc: "ÎÑ§Ìä∏ÏõåÌÅ¨ Î≥¥Ïïà ÏãúÏä§ÌÖú." },
        { term: "IP Address", desc: "Ïù∏ÌÑ∞ÎÑ∑ ÌîÑÎ°úÌÜ†ÏΩú Ï£ºÏÜå." },
        { term: "DNS", desc: "ÎèÑÎ©îÏù∏ Ïù¥Î¶Ñ ÏãúÏä§ÌÖú." },
        { term: "SSL", desc: "Î≥¥Ïïà ÏÜåÏºì Í≥ÑÏ∏µ ÌîÑÎ°úÌÜ†ÏΩú." },
        { term: "Load Balancer", desc: "Î∂ÄÌïò Î∂ÑÏÇ∞ Ïû•Ïπò." },
        { term: "Virtual Machine", desc: "Í∞ÄÏÉÅ Î®∏Ïã†." },
        { term: "Compiler", desc: "Ïª¥ÌååÏùºÎü¨." },
        { term: "Debugger", desc: "ÎîîÎ≤ÑÍπÖ ÎèÑÍµ¨." },
        { term: "Frontend", desc: "ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï™Ω Í∞úÎ∞ú." },
        { term: "Backend", desc: "ÏÑúÎ≤Ñ Î∞è Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ï™Ω Í∞úÎ∞ú." },
        { term: "API Gateway", desc: "API Ï§ëÍ∞ú ÏÑúÎ≤Ñ." },
        { term: "REST API", desc: "REST ÏïÑÌÇ§ÌÖçÏ≤ò Í∏∞Î∞ò API." },
        { term: "GraphQL", desc: "Îç∞Ïù¥ÌÑ∞ ÏßàÏùò Ïñ∏Ïñ¥." },
        { term: "WebSocket", desc: "ÏñëÎ∞©Ìñ• ÌÜµÏã† ÌîÑÎ°úÌÜ†ÏΩú." },
        { term: "OAuth", desc: "Í∂åÌïú ÏúÑÏûÑ ÌîÑÎ°úÌÜ†ÏΩú." },
        { term: "JWT", desc: "JSON Ïõπ ÌÜ†ÌÅ∞." },
        { term: "CI/CD", desc: "ÏßÄÏÜçÏ†Å ÌÜµÌï©/Î∞∞Ìè¨." },
        { term: "Agile", desc: "ÎØºÏ≤©Ìïú ÏÜåÌîÑÌä∏Ïõ®Ïñ¥ Í∞úÎ∞ú Î∞©Î≤ïÎ°†." },
        { term: "Scrum", desc: "Ïï†ÏûêÏùº Í∞úÎ∞ú ÌîÑÎ†àÏûÑÏõåÌÅ¨." },
        { term: "Kanban", desc: "ÏûëÏóÖ ÌùêÎ¶Ñ Í¥ÄÎ¶¨ Î∞©Î≤ï." },
        { term: "Microservices", desc: "ÏûëÏùÄ ÏÑúÎπÑÏä§Îì§Ïùò Ï°∞Ìï© ÏïÑÌÇ§ÌÖçÏ≤ò." },
        { term: "DevOps", desc: "Í∞úÎ∞úÍ≥º Ïö¥ÏòÅÏùò ÌÜµÌï©." },
        { term: "Latency", desc: "ÏßÄÏó∞ ÏãúÍ∞Ñ." },
        { term: "Throughput", desc: "Ï≤òÎ¶¨Îüâ." },
        { term: "Scalability", desc: "ÌôïÏû•ÏÑ±." },
      ];

      // ÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞ (Í∞ôÏùÄ Ïö©Ïñ¥Îì§Î°ú Î¨∏Ï†ú+Î≥¥Í∏∞ Íµ¨ÏÑ±)
      // Í∞Å Î¨∏Ï†úÎäî Ï†ïÎãµÏù∏ Ïù∏Îç±Ïä§Î•º ÎßûÍ≤å ÏÑûÏñ¥ÏÑú ÏÑ§Ï†ï
      let quizData = [];

      function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
      }

      // ÌÄ¥Ï¶à ÏÉùÏÑ±: termsÏ§ë ÎûúÎç§ 10Î¨∏Ï†úÎ•º ÎΩëÏïÑ Î≥¥Í∏∞ 4Í∞úÏî© ÏÑûÏñ¥ÏÑú ÎßåÎì¶
      function generateQuizData() {
        quizData = [];
        const shuffledTerms = [...terms];
        shuffleArray(shuffledTerms);
        const pickCount = Math.min(10, shuffledTerms.length);
        for (let i = 0; i < pickCount; i++) {
          const question = shuffledTerms[i].term;
          const answer = shuffledTerms[i].desc;

          // Î≥¥Í∏∞ 3Í∞ú ÎûúÎç§ÏúºÎ°ú Ï∂îÏ∂ú (Ï†ïÎãµ Ï†úÏô∏)
          let options = [answer];
          const others = terms.filter((t) => t.term !== question);
          shuffleArray(others);
          for (let j = 0; j < 3; j++) {
            options.push(others[j].desc);
          }
          shuffleArray(options);

          const answerIndex = options.indexOf(answer);

          quizData.push({
            question,
            options,
            answer: answerIndex,
          });
        }
      }

      // UI ÏöîÏÜå Ï∞∏Ï°∞
      const menuBtn = document.getElementById("menuBtn");
      const menuBox = document.getElementById("menuBox");
      const showTermsBtn = document.getElementById("showTermsBtn");
      const showQuizBtn = document.getElementById("showQuizBtn");
      const toggleDarkBtn = document.getElementById("toggleDarkBtn");
      const contentArea = document.getElementById("contentArea");
      const searchBox = document.getElementById("searchBox");
      const searchBtn = document.getElementById("searchBtn");
      const autocompleteList = document.getElementById("autocompleteList");
      const searchForm = document.getElementById("searchForm");

      // Î©îÎâ¥ Ïó¥Í∏∞/Îã´Í∏∞
      function toggleMenu() {
        const isOpen = menuBox.classList.toggle("open");
        menuBtn.setAttribute("aria-expanded", isOpen);
        menuBox.setAttribute("aria-hidden", !isOpen);
        if (isOpen) {
          menuBox.focus();
        }
      }
      menuBtn.addEventListener("click", toggleMenu);

      // Î©îÎâ¥ Ìï≠Î™© ÌÅ¥Î¶≠ Ïãú Î©îÎâ¥ Îã´Í∏∞
      function closeMenu() {
        menuBox.classList.remove("open");
        menuBtn.setAttribute("aria-expanded", false);
        menuBox.setAttribute("aria-hidden", true);
        menuBtn.focus();
      }

      // Ïö©Ïñ¥ Ïπ¥Îìú ÏÉà Ï∞Ω Ïó¥Í∏∞
      function openTermInNewWindow(term) {
        const url = `term.html?term=${encodeURIComponent(term)}`;
        window.open(
          url,
          "_blank",
          "width=480,height=400,scrollbars=yes,resizable=yes"
        );
      }

      // Ïö©Ïñ¥ Ïπ¥Îìú Î≥¥Ïó¨Ï£ºÍ∏∞ (ÌïÑÌÑ∞ÎßÅ Í∞ÄÎä•)
      function showTerms(filter = "") {
        contentArea.innerHTML = "";
        let filteredTerms = terms;
        if (filter.trim() !== "") {
          const lowerFilter = filter.trim().toLowerCase();
          filteredTerms = terms.filter(
            (t) =>
              t.term.toLowerCase().includes(lowerFilter) ||
              t.desc.toLowerCase().includes(lowerFilter)
          );
        }
        if (filteredTerms.length === 0) {
          contentArea.innerHTML = `<p>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.</p>`;
          return;
        }
        filteredTerms.forEach(({ term, desc }) => {
          const card = document.createElement("article");
          card.className = "term-card";
          card.tabIndex = 0;
          card.setAttribute("role", "button");
          card.setAttribute("aria-label", `${term} Ïö©Ïñ¥ ÏÑ§Î™Ö Î≥¥Í∏∞`);
          card.innerHTML = `<h3>${term}</h3><p>${
            desc.length > 100 ? desc.slice(0, 100) + "..." : desc
          }</p>`;
          card.addEventListener("click", () => openTermInNewWindow(term));
          card.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              openTermInNewWindow(term);
            }
          });
          contentArea.appendChild(card);
        });
      }

      // ÏûêÎèôÏôÑÏÑ± Î¶¨Ïä§Ìä∏ Î≥¥Ïó¨Ï£ºÍ∏∞
      function updateAutocomplete() {
        const val = searchBox.value.trim().toLowerCase();
        if (val.length === 0) {
          autocompleteList.innerHTML = "";
          autocompleteList.hidden = true;
          searchBox.setAttribute("aria-expanded", "false");
          return;
        }
        const matched = terms
          .filter(
            (t) =>
              t.term.toLowerCase().includes(val) ||
              t.desc.toLowerCase().includes(val)
          )
          .slice(0, 10);

        if (matched.length === 0) {
          autocompleteList.innerHTML = "";
          autocompleteList.hidden = true;
          searchBox.setAttribute("aria-expanded", "false");
          return;
        }
        autocompleteList.innerHTML = matched
          .map(
            (t) =>
              `<li role="option" tabindex="0" data-term="${t.term}">${t.term}</li>`
          )
          .join("");
        autocompleteList.hidden = false;
        searchBox.setAttribute("aria-expanded", "true");
      }

      // ÏûêÎèôÏôÑÏÑ± Ìï≠Î™© ÌÅ¥Î¶≠ Ïãú Í≤ÄÏÉâ Ïã§Ìñâ
      autocompleteList.addEventListener("click", (e) => {
        if (e.target.tagName === "LI") {
          const term = e.target.dataset.term;
          searchBox.value = term;
          autocompleteList.innerHTML = "";
          autocompleteList.hidden = true;
          searchBox.setAttribute("aria-expanded", "false");
          searchTerm(term);
        }
      });

      // ÏûêÎèôÏôÑÏÑ± Ìï≠Î™© ÌÇ§Î≥¥Îìú ÎÇ¥ÎπÑÍ≤åÏù¥ÏÖò & ÏÑ†ÌÉù
      autocompleteList.addEventListener("keydown", (e) => {
        if (e.key === "ArrowDown" || e.key === "ArrowUp") {
          e.preventDefault();
          const items = [...autocompleteList.querySelectorAll("li")];
          if (items.length === 0) return;
          let idx = items.findIndex((item) =>
            item.classList.contains("active")
          );
          if (idx === -1) idx = 0;
          else items[idx].classList.remove("active");
          if (e.key === "ArrowDown") {
            idx = (idx + 1) % items.length;
          } else {
            idx = (idx - 1 + items.length) % items.length;
          }
          items.forEach((item) => item.classList.remove("active"));
          items[idx].classList.add("active");
          items[idx].focus();
        } else if (e.key === "Enter") {
          e.preventDefault();
          const active = autocompleteList.querySelector("li.active");
          if (active) {
            const term = active.dataset.term;
            searchBox.value = term;
            autocompleteList.innerHTML = "";
            autocompleteList.hidden = true;
            searchBox.setAttribute("aria-expanded", "false");
            searchTerm(term);
          }
        }
      });

      // Í≤ÄÏÉâ Ïã§Ìñâ Ìï®Ïàò
      function searchTerm(term) {
        // Î©îÎâ¥ Îã´Í∏∞
        closeMenu();

        // ÌïÑÌÑ∞ÎßÅÎêú Ïö©Ïñ¥ Î≥¥Ïó¨Ï£ºÍ∏∞
        showTerms(term);
      }

      // Í≤ÄÏÉâÏ∞Ω ÏûÖÎ†• Ïù¥Î≤§Ìä∏
      searchBox.addEventListener("input", updateAutocomplete);

      // Ìèº Ï†úÏ∂ú (Í≤ÄÏÉâ) Ï≤òÎ¶¨
      searchForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const val = searchBox.value.trim();
        if (val !== "") {
          autocompleteList.innerHTML = "";
          autocompleteList.hidden = true;
          searchBox.setAttribute("aria-expanded", "false");
          searchTerm(val);
        }
      });

      // Î©îÎâ¥ Î≤ÑÌäºÎì§ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
      showTermsBtn.addEventListener("click", () => {
        closeMenu();
        searchBox.value = "";
        autocompleteList.innerHTML = "";
        autocompleteList.hidden = true;
        searchBox.setAttribute("aria-expanded", "false");
        showTerms();
      });

      showQuizBtn.addEventListener("click", () => {
        closeMenu();
        generateQuizData();
        showQuiz();
      });

      toggleDarkBtn.addEventListener("click", () => {
        const isDark = document.body.classList.toggle("dark-mode");
        toggleDarkBtn.setAttribute("aria-pressed", isDark);
      });

      // ÌÄ¥Ï¶à Í¥ÄÎ†® ÏΩîÎìú
      let currentQuizIndex = 0;
      let score = 0;

      function showQuiz() {
        if (quizData.length === 0) {
          contentArea.innerHTML = "<p>ÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>";
          return;
        }
        score = 0;
        currentQuizIndex = 0;
        renderQuizQuestion();
      }

      function renderQuizQuestion() {
        contentArea.innerHTML = "";
        const quizBox = document.createElement("section");
        quizBox.id = "quizBox";
        quizBox.setAttribute("aria-live", "polite");
        const current = quizData[currentQuizIndex];

        // Î¨∏Ï†ú ÌëúÏãú
        const questionP = document.createElement("p");
        questionP.id = "question";
        questionP.textContent = `${currentQuizIndex + 1}. Îã§Ïùå Ï§ë "${
          current.question
        }"Ïùò ÏÑ§Î™ÖÏúºÎ°ú Í∞ÄÏû• Ï†ÅÏ†àÌïú Í≤ÉÏùÄ?`;
        quizBox.appendChild(questionP);

        // ÏÑ†ÌÉùÏßÄ Î≤ÑÌäºÎì§
        const optionsDiv = document.createElement("div");
        optionsDiv.id = "options";
        current.options.forEach((optionText, idx) => {
          const btn = document.createElement("button");
          btn.textContent = optionText;
          btn.type = "button";
          btn.setAttribute("data-index", idx);
          btn.addEventListener("click", () => {
            handleAnswer(idx);
          });
          optionsDiv.appendChild(btn);
        });
        quizBox.appendChild(optionsDiv);

        // Í≤∞Í≥º ÌëúÏãú
        const resultDiv = document.createElement("div");
        resultDiv.id = "result";
        quizBox.appendChild(resultDiv);

        // Îã§Ïùå Î≤ÑÌäº
        const nextBtn = document.createElement("button");
        nextBtn.id = "nextBtn";
        nextBtn.textContent = "Îã§Ïùå Î¨∏Ï†ú";
        nextBtn.disabled = true;
        nextBtn.addEventListener("click", () => {
          currentQuizIndex++;
          if (currentQuizIndex < quizData.length) {
            renderQuizQuestion();
          } else {
            showQuizResult();
          }
        });
        quizBox.appendChild(nextBtn);

        contentArea.appendChild(quizBox);
      }

      function handleAnswer(selectedIndex) {
        const quizBox = document.getElementById("quizBox");
        const resultDiv = quizBox.querySelector("#result");
        const nextBtn = quizBox.querySelector("#nextBtn");
        const current = quizData[currentQuizIndex];

        // Ï†ïÎãµ ÌôïÏù∏ Î∞è ÌëúÏãú
        if (selectedIndex === current.answer) {
          resultDiv.textContent = "Ï†ïÎãµÏûÖÎãàÎã§! üéâ";
          resultDiv.style.color = "green";
          score++;
        } else {
          resultDiv.textContent = `Ïò§ÎãµÏûÖÎãàÎã§. Ï†ïÎãµ: "${
            current.options[current.answer]
          }"`;
          resultDiv.style.color = "red";
        }

        // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî Î∞è Îã§Ïùå Î≤ÑÌäº ÌôúÏÑ±Ìôî
        const optionButtons = quizBox.querySelectorAll("#options button");
        optionButtons.forEach((btn) => {
          btn.disabled = true;
          if (Number(btn.dataset.index) === current.answer) {
            btn.style.borderColor = "green";
            btn.style.backgroundColor = "#d4f8d4";
            btn.style.color = "green";
          }
          if (
            Number(btn.dataset.index) === selectedIndex &&
            selectedIndex !== current.answer
          ) {
            btn.style.borderColor = "red";
            btn.style.backgroundColor = "#f8d4d4";
            btn.style.color = "red";
          }
        });

        nextBtn.disabled = false;
      }

      function showQuizResult() {
        contentArea.innerHTML = "";
        const resultBox = document.createElement("section");
        resultBox.id = "quizBox";

        const scoreP = document.createElement("p");
        scoreP.textContent = `ÌÄ¥Ï¶à Ï¢ÖÎ£å! Ï¥ù ${quizData.length}Î¨∏Ï†ú Ï§ë ${score}Î¨∏Ï†ú ÎßûÏ∂îÏÖ®ÏäµÎãàÎã§.`;
        scoreP.style.fontWeight = "700";
        scoreP.style.fontSize = "1.3rem";
        scoreP.style.marginBottom = "20px";
        resultBox.appendChild(scoreP);

        const retryBtn = document.createElement("button");
        retryBtn.id = "retryBtn";
        retryBtn.textContent = "Îã§Ïãú ÌíÄÍ∏∞";
        retryBtn.addEventListener("click", () => {
          generateQuizData();
          showQuiz();
        });
        resultBox.appendChild(retryBtn);

        contentArea.appendChild(resultBox);
      }

      // Ï¥àÍ∏∞ Ïã§Ìñâ
      showTerms();
    </script>
  </body>
</html>
